# 1.高并发情况下的解决策略

> 总体上说，使用缓存，异步，和分布式是解决峰值相应，高并发的三种基本策略；

#### 1.1 互联网层

1. 使用负载均衡，例如使用nginx服务器；
2. 使用内容分发网络cdn，尽快的使用户获取所需内容

#### 1.2 web服务器层

1. 将会话的管理，放入到cookie中进行管理，但是如果浏览器禁用cookie会无法使用，所以一般在分布式过程中，可以专门设置一个存储所有session的位置；解决session同步问题
2. 将动态页面静态化，这种方式经常用于不经常更新数据的页面，剩余会动态变化的数据可以使用ajax进行更新；
3. 使用缓存，主要是浏览器端缓存js/css文件，或者是cdn技术做大量页面缓存，同时也可以使用自己搭建的缓存服务器存储访问频率较高的页面；
4. Gzip:利用浏览器能自行进行gzip解压缩的原理对静态资源进行压缩，减少资源大小；
5. 将图片，或者css，js文件等合成一个大资源；例如，图标之类的，可以将很多小图片放到一张大图片上；
6. Websphere Cluster。集群

#### 1.3 应用服务器或者业务服务器层

1. 使用分布式系统，微服务等
2. 使用Cache，这一层的缓存主要是对高频数据进行缓存，比如对中间计算结果进行缓存，而且是基于内存缓存居多，比如Memcached和Redis，
3. 同步转异步，使用消息队列：rabbitMQ

#### 1.4 数据访问、文件访问、内部网络访问层

1. 读写分离，高并发情况下一般写的的机会很少，大多都是读取数据；让主数据库（master）处理事务性增、改、删操作（INSERT、UPDATE、DELETE），而从数据库（slave）处理SELECT查询操作

2. DB Cluster：数据库集群是利用至少两台或者多台数据库服务器，构成一个虚拟单一数据库逻辑映像，像单数据库系统那样，向客户端提供透明的数据服务。
3. 分布式存储**DAS/NAS/SAN**
4. Cache ：对要求不是特别实时的大数据进行预统计分析，然后缓存下来做报表等，这个时候直接从缓存里读取即可，提高统计速度。
5. 使用非关系型数据库redis
6. 分库分表分区

# 实例：秒杀系统的设计



