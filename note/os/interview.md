### 进程和线程,协程的区别

> 进程有独立的地址空间，一个进程崩溃后，在保护模式下不会对其它进程产生影响，而线程只是一个进程中的不同执行路径。线程有自己的堆栈和局部变量，但线程之间没有单独的地址空间，一个线程死掉就等于整个进程死掉，所以多进程的程序要比多线程的程序健壮，但在进程切换时，耗费资源较大，效率要差一些。**但对于一些要求同时进行并且又要共享某些变量的并发操作，只能用线程，不能用进程。**

1. 进程是分配资源的最小单元，线程是cpu调度的最小单元
2. 一个程序至少有一个进程,一个进程至少有一个线程.

> 协程是用户可以调度的微线程，进程和线程都是cpu进行调度的，但是协程是用户进行调度的；

### 进程间通信方式IPC

https://www.jianshu.com/p/c1015f5ffa74

1. 管道
2. 有名管道
3. 信号
4. 消息队列
5. 共享内存
6. 信号量
7. 套接字

### 操作系统分配的进程空间是怎样的？线程能共享哪些？

| 进程占有的资源                                           | 线程占有的资源               |
| -------------------------------------------------------- | ---------------------------- |
| 地址空间  全局变量  打开的文件  子进程  信号量  账户信息 | 栈  寄存器  状态  程序计数器 |

Linux进程地址空间

1. 栈，存储局部变量
2. 内存映射段：这里也用来映射ELF文件用到的动态链接库。
3. 堆：分配的堆内存是经过字节对齐的空间，以适合原子操作。堆管理器通过链表管理每个申请的内存，
4. 数据段:主要用来放全局变量和静态局部变量，地址编译期确定。
5. 代码段:放的函数指令，地址编译期确定。

### 死锁条件，解决方式。

死锁条件

1. 互斥
2. 不可剥夺    -------   强制释放
3. 请求保持   ---------  一次性分配全部静态资源
4. 循环等待    --------   按顺序分配资源

死锁的避免-----银行家算法

死锁的检测-----资源图

